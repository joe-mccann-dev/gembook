function toggleOtherUsers() {
  const otherUsers = document.querySelector("#other-users");
  const otherUsersButton = document.querySelector("#show-other-users")
  hasChildrenNodes = otherUsers.children.length
  if (hasChildrenNodes) {
    hideUsers(otherUsers);
  } else {
    showUsers(otherUsers);
  }
  otherUsersButton.value = toggleButtonValue(hasChildrenNodes)
}

function hideUsers(users) {
  removeAllChildNodes(users)
}

function showUsers(users) {
  users.insertAdjacentHTML("beforeend", "<%= j render partial: 'user', collection: @users %>");
}

function removeAllChildNodes(parent) {
  while (parent.firstChild) {
    parent.removeChild(parent.firstChild);
  }
}

function toggleButtonValue(hasChildrenNodes) {
  if (hasChildrenNodes) return 'Show Other Users'

  return 'Hide Other Users'
}

toggleOtherUsers();